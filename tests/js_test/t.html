<!DOCTYPE html>
<html>
<head>
<script>
//var iq='<cli:iq type="get" id="200" xmlns:cli="jabber:client"><query xmlns="google:jingleinfo"/></cli:iq>';
var iq = '<iq xmlns="jabber:client" from="akhaliq_dincloud.com@dincloud.com/ed386cb4-0d22-3265-efe1-437de277f897" to="akhaliq_dincloud.com@dincloud.com/42796289201384323057922144" xml:lang="*" xmlns:xml="http://www.w3.org/XML/1998/namespace" type="set" id="26"><jingle xmlns="urn:xmpp:jingle:1" sid="8910339495942545834" action="session-accept"><content name="chromoting" creator="initiator"><description xmlns="google:remoting"><control transport="mux-stream" version="2"/><event transport="mux-stream" version="2"/><video transport="stream" version="2" codec="vp8"/><audio transport="mux-stream" version="2" codec="opus"/><initial-resolution width="640" height="480"/><authentication method="spake2_hmac"><eke-message>wiSu9QABiyAPl+h5wRDHJMcofS9lMG5HvGaK7kM3OMKpTcNgYZy1s4Z6h+Jx4LqHKiE7IpbNbfM=</eke-message><certificate>MIICsjCCAZqgAwIBAgIQHIfp1i/RZL5E5iPuSy6UDzANBgkqhkiG9w0BAQUFADAVMRMwEQYDVQQDEwpjaHJvbW90aW5nMB4XDTEzMTExMzA2MDQwNFoXDTEzMTExNDA2MDQwNFowFTETMBEGA1UEAxMKY2hyb21vdGluZzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMJSxUCAIRiRGT4zdGVxej9++qgusBcrZZKZmTTA8zUGGRgKgnRnb9Hktp+ONGEyXLloOQ4OzHDmxS9L3JQwQYYjtIv1RBVuSyDq8e+NRXq4+aI4boKNtRKUcnlp4U4DhiGKePBudv1LcKBvb5RwJN4RUqxhueYrswEG06UF5KRXtbvMrMdrWFlykYcomMcOM0Z6/KxdOOwjg5tXFjJbUPnx3JhdnNVNad+MDgXkTsKJ2k8dHlw6kRAS/wuFaOfbxk+gcU3x5x1QuNiyO+psW3ULKSe/8+BprVuaBH6+1I50EqdfSjdurt/yIgSwtfPG+8v7YqcoWni7I4DQ5XtzzYUCAwEAATANBgkqhkiG9w0BAQUFAAOCAQEAXN+oUqeHUMISWBEAf8I57/HMDuviD9E5j+dv85jtjPYpK+HCkHX2KZ0Ad+p4LkzN/Hn4jZIzLOmTY7vhFVbkwd5yl7auUogN8XxB12OooLVdyCGsyrVYJalSB0Z+lEitnlRhugMjqq4JJD5lq0YoD04aiDGJsCJOD/cACPm6OZTDmfC9YvSJE1aG21WYCM1Ge3JVBAGWeUFGA8M1SwybUGmxoY6Nozg/R1Atrx1sp4ctdjs3hMuSB5dwKJ3c1AicARTkc7P3xC0S6ITjbecbbeSAl4/mKIRm5ewEW12dhH8WHtz8ocbSadXaTyTQXOzjp0U//7gv4jA/DdL+sJumFw==</certificate></authentication></description><transport xmlns="http://www.google.com/transport/p2p"/></content></jingle></iq>';
var XmlDoc = null;
function replaceAll(find, replace, str) {
  return str.replace(new RegExp(find, 'g'), replace);
}

function strToXMLElement(packet)
{
	var XmlEle = null;
	if (XmlDoc === null)
	{
		XmlDoc = new DOMParser();
	}
	XmlEle = XmlDoc.parseFromString(packet, "text/xml");	
	return XmlEle.documentElement;
}


function myFunction()
{
alert("resolution: " + screen.width + "x" + screen.height);
//alert(iq);
//iq = iq.replace('cli:', '');
//iq = replaceAll('cli:', '', iq);
//alert(iq);
 //document.getElementById("demo").innerHTML=iq;
}
var ssid=null;
function extractInfo()
{
alert(screen.width);
alert(screen.height);
	var stnza = strToXMLElement(iq);
	if(stnza != null)
	{
		var jngle0 = stnza.getElementsByTagName("jingle")[0];
		if(jngle0 !=null)
			sid = jngle0.getAttribute('sid');
	}
	console.log('sid: ' + sid);
	
var session_accept_pkt_id=null;
var session_accept_sid=null;
current_display_x_res=1440;
current_display_y_res=900;

var custom_jingle_pkt='<iq xmlns="jabber:client" to="akhaliq_dincloud.com@dincloud.com/ed386cb4-0d22-3265-efe1-437de277f897" type="set"> \
  <jingle xmlns="urn:xmpp:jingle:1" sid="'+sid+'" action="session-info"> \
    <resolution width="'+ current_display_x_res +'" height="'+ current_display_y_res +'" /> \
  </jingle> \
</iq>';	
console.log(custom_jingle_pkt);
}
</script>
</head>
<body>

<p>Click the button to trigger a function.</p>

<button onclick="myFunction()">Click me</button>

<p id="demo"></p>

</body>
</html>